{"ast":null,"code":"import { ADD_TO_FAVORITES_FAILURE, ADD_TO_FAVORITES_REQUEST, ADD_TO_FAVORITES_SUCCESS, GET_USER_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT, REGISTER_FAILURE, REGISTER_REQUEST, REGISTER_SUCCESS, REQUEST_RESET_PASSWORD_FAILURE, REQUEST_RESET_PASSWORD_REQUEST, REQUEST_RESET_PASSWORD_SUCCESS } from \"./ActionType\";\nimport { API_URL, api } from \"../../config/api\";\nimport axios from \"axios\";\nexport const registerUser = reqData => async dispatch => {\n  console.log(\"resgister request data \", reqData.userData);\n  try {\n    dispatch({\n      type: REGISTER_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/signup`, reqData.userData);\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\n      reqData.navigate(\"/admin/restaurant\");\n    } else {\n      reqData.navigate(\"/\");\n    }\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: data.jwt\n    });\n  } catch (error) {\n    console.log(\"catch error ------ \", error);\n    dispatch({\n      type: REGISTER_FAILURE,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const loginUser = reqData => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/signin`, reqData.data);\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\n      reqData.navigate(\"/admin/restaurant\");\n    } else {\n      reqData.navigate(\"/\");\n    }\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data.jwt\n    });\n  } catch (error) {\n    dispatch({\n      type: LOGIN_FAILURE,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const getUser = token => {\n  return async dispatch => {\n    dispatch({\n      type: GET_USER_REQUEST\n    });\n    try {\n      const response = await api.get(`/api/users/profile`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const user = response.data;\n      dispatch({\n        type: GET_USER_SUCCESS,\n        payload: user\n      });\n      console.log(\"req User \", user);\n    } catch (error) {\n      const errorMessage = error.message;\n      dispatch({\n        type: GET_USER_FAILURE,\n        payload: errorMessage\n      });\n    }\n  };\n};\nexport const addToFavorites = ({\n  restaurantId,\n  jwt\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: ADD_TO_FAVORITES_REQUEST\n    });\n    try {\n      const {\n        data\n      } = await api.put(`api/restaurants/${restaurantId}/add-favorites`, {}, {\n        headers: {\n          Authorization: `Bearer ${jwt}`\n        }\n      });\n      console.log(\"Add to favorites \", data);\n      dispatch({\n        type: ADD_TO_FAVORITES_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      console.log(\"catch error \", error);\n      dispatch({\n        type: ADD_TO_FAVORITES_FAILURE,\n        payload: error.message\n      });\n    }\n  };\n};\nexport const resetPasswordRequest = email => async dispatch => {\n  dispatch({\n    type: REQUEST_RESET_PASSWORD_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/reset-password-request?email=${email}`, {});\n    console.log(\"reset password -: \", data);\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error \", error);\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const resetPassword = reqData => async dispatch => {\n  dispatch({\n    type: REQUEST_RESET_PASSWORD_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/reset-password`, reqData.data);\n    console.log(\"reset password -: \", data);\n    reqData.navigate(\"/password-change-success\");\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error \", error);\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const logout = () => {\n  return async dispatch => {\n    dispatch({\n      type: LOGOUT\n    });\n    localStorage.clear();\n  };\n};","map":{"version":3,"names":["ADD_TO_FAVORITES_FAILURE","ADD_TO_FAVORITES_REQUEST","ADD_TO_FAVORITES_SUCCESS","GET_USER_FAILURE","GET_USER_REQUEST","GET_USER_SUCCESS","LOGIN_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGOUT","REGISTER_FAILURE","REGISTER_REQUEST","REGISTER_SUCCESS","REQUEST_RESET_PASSWORD_FAILURE","REQUEST_RESET_PASSWORD_REQUEST","REQUEST_RESET_PASSWORD_SUCCESS","API_URL","api","axios","registerUser","reqData","dispatch","console","log","userData","type","data","post","jwt","localStorage","setItem","role","navigate","payload","error","response","message","loginUser","getUser","token","get","headers","Authorization","user","errorMessage","addToFavorites","restaurantId","put","resetPasswordRequest","email","resetPassword","logout","clear"],"sources":["/Users/cyro_dev/Documents/codes/project/craveKart/frontend-v2/src/State/Authentication/Action.js"],"sourcesContent":["import {\n  ADD_TO_FAVORITES_FAILURE,\n  ADD_TO_FAVORITES_REQUEST,\n  ADD_TO_FAVORITES_SUCCESS,\n  GET_USER_FAILURE,\n  GET_USER_REQUEST,\n  GET_USER_SUCCESS,\n  LOGIN_FAILURE,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGOUT,\n  REGISTER_FAILURE,\n  REGISTER_REQUEST,\n  REGISTER_SUCCESS,\n  REQUEST_RESET_PASSWORD_FAILURE,\n  REQUEST_RESET_PASSWORD_REQUEST,\n  REQUEST_RESET_PASSWORD_SUCCESS,\n} from \"./ActionType\";\nimport { API_URL, api } from \"../../config/api\";\nimport axios from \"axios\";\n\nexport const registerUser = (reqData) => async (dispatch) => {\n  console.log(\"resgister request data \",reqData.userData)\n  try {\n    dispatch({ type: REGISTER_REQUEST });\n\n    const { data } = await axios.post(`${API_URL}/auth/signup`, reqData.userData);\n    if(data.jwt) localStorage.setItem(\"jwt\",data.jwt)\n    if(data.role===\"ROLE_RESTAURANT_OWNER\"){\n      reqData.navigate(\"/admin/restaurant\")\n    }\n    else{\n      reqData.navigate(\"/\")\n    }\n    dispatch({ type: REGISTER_SUCCESS, payload: data.jwt });\n  } catch (error) {\n    console.log(\"catch error ------ \",error)\n    dispatch({\n      type: REGISTER_FAILURE,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const loginUser = (reqData) => async (dispatch) => {\n  try {\n    dispatch({ type: LOGIN_REQUEST });\n\n    const { data } = await axios.post(`${API_URL}/auth/signin`, reqData.data);\n    if(data.jwt) localStorage.setItem(\"jwt\",data.jwt)\n    if(data.role===\"ROLE_RESTAURANT_OWNER\"){\n      reqData.navigate(\"/admin/restaurant\")\n    }\n    else{\n      reqData.navigate(\"/\")\n    }\n    \n    dispatch({ type: LOGIN_SUCCESS, payload: data.jwt });\n  } catch (error) {\n    dispatch({\n      type: LOGIN_FAILURE,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\n\nexport const getUser = (token) => {\n  return async (dispatch) => {\n    dispatch({ type: GET_USER_REQUEST });\n    try {\n      const response = await api.get(`/api/users/profile`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      const user = response.data;\n      \n      dispatch({ type: GET_USER_SUCCESS, payload: user });\n      console.log(\"req User \", user);\n    } catch (error) {\n      const errorMessage = error.message;\n      dispatch({ type: GET_USER_FAILURE, payload: errorMessage });\n    }\n  };\n};\n\nexport const addToFavorites = ({restaurantId,jwt}) => {\n  return async (dispatch) => {\n    dispatch({ type: ADD_TO_FAVORITES_REQUEST });\n    try {\n      const { data } = await api.put(`api/restaurants/${restaurantId}/add-favorites`,{},{\n        headers: {\n          Authorization: `Bearer ${jwt}`,\n        },\n      });\n      console.log(\"Add to favorites \",data)\n      dispatch({ type: ADD_TO_FAVORITES_SUCCESS, payload: data });\n    } catch (error) {\n      console.log(\"catch error \",error)\n      dispatch({\n        type: ADD_TO_FAVORITES_FAILURE,\n        payload: error.message,\n      });\n    }\n  };\n};\n\nexport const resetPasswordRequest = (email) => async (dispatch) => {\n  dispatch({type:REQUEST_RESET_PASSWORD_REQUEST});\n  try {\n    const {data} = await axios.post(`${API_URL}/auth/reset-password-request?email=${email}`,{});\n    \n    console.log(\"reset password -: \", data);\n   \n    dispatch({type:REQUEST_RESET_PASSWORD_SUCCESS,payload:data});\n  } catch (error) {\n    console.log(\"error \",error)\n    dispatch({type:REQUEST_RESET_PASSWORD_FAILURE,payload:error.message});\n  }\n};\n\nexport const resetPassword = (reqData) => async (dispatch) => {\n  dispatch({type:REQUEST_RESET_PASSWORD_REQUEST});\n  try {\n    const {data} = await axios.post(`${API_URL}/auth/reset-password`,reqData.data);\n    \n    console.log(\"reset password -: \", data);\n\n    reqData.navigate(\"/password-change-success\")\n   \n    dispatch({type:REQUEST_RESET_PASSWORD_SUCCESS,payload:data});\n  } catch (error) {\n    console.log(\"error \",error)\n    dispatch({type:REQUEST_RESET_PASSWORD_FAILURE,payload:error.message});\n  }\n};\n\nexport const logout = () => {\n  return async (dispatch) => {\n    dispatch({ type: LOGOUT });\n    localStorage.clear();\n  };\n};\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}